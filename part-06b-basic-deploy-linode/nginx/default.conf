upstream {
    fastapi_app 0.0.0.0:8001;
}

server {
    listen 80;
    listen [::]:80;
    server_name fastapi-tutorial;

    location /(.*) {
		proxy_pass http://fastapi_app/$1$is_args$args;
		proxy_set_header X-Real-IP  $remote_addr;
		proxy_set_header X-Forwarded-For $remote_addr;
		proxy_set_header Host $host;
		proxy_set_header X-Real-Port $server_port;
		proxy_set_header X-Real-Scheme $scheme;
    }
}